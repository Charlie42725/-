# è³‡æ–™åº«å‰ç«¯æ•´åˆå®Œæˆèªªæ˜

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. è³‡æ–™åº«è¨­å®š
- âœ… Prisma Client å·²ç”Ÿæˆ
- âœ… è³‡æ–™åº«é€£æ¥å·¥å…· (`src/lib/db.ts`)
- âœ… TypeScript é¡å‹å®šç¾© (`src/types/index.ts`)
- âœ… ç’°å¢ƒè®Šé‡ç¯„ä¾‹æ–‡ä»¶ (`.env.example`)

### 2. API Routes
å·²å‰µå»ºä»¥ä¸‹ API ç«¯é»ï¼š

- **`GET /api/products`** - å•†å“åˆ—è¡¨
  - æ”¯æ´å“ç‰Œã€ç³»åˆ—ã€ç‹€æ…‹ç¯©é¸
  - æ”¯æ´æ’åºï¼ˆæœ€æ–°ã€åƒ¹æ ¼ã€ç†±é–€ï¼‰
  - æ”¯æ´åˆ†é ï¼ˆlimit, offsetï¼‰

- **`GET /api/products/[slug]`** - å–®ä¸€å•†å“è©³æƒ…
  - åŒ…å«å®Œæ•´çš„å“ç‰Œã€ç³»åˆ—ã€çé …ã€åœ–ç‰‡è³‡è¨Š

- **`GET /api/brands`** - å“ç‰Œåˆ—è¡¨
  - åŒ…å«ç³»åˆ—å’Œå•†å“è¨ˆæ•¸

### 3. å‰ç«¯é é¢
å·²å‰µå»ºä»¥ä¸‹é é¢ï¼ˆServer Componentsï¼‰ï¼š

- **`/products/[slug]`** - å•†å“è©³æƒ…é 
  - å®Œæ•´å•†å“è³‡è¨Šå±•ç¤º
  - çé …åˆ—è¡¨
  - åœ–ç‰‡ç•«å»Š
  - è³¼è²·æŒ‰éˆ•
  - é€²åº¦æ¢é¡¯ç¤º

- **`/brands/[slug]`** - å“ç‰Œé é¢
  - å“ç‰Œè³‡è¨Šå±•ç¤º
  - ç³»åˆ—åˆ—è¡¨
  - å•†å“é è¦½

- **`/series/[slug]`** - ç³»åˆ—é é¢
  - ç³»åˆ—è³‡è¨Šå±•ç¤º
  - è©²ç³»åˆ—æ‰€æœ‰å•†å“

### 4. çµ„ä»¶æ›´æ–°
å·²æ›´æ–°çµ„ä»¶é€£æ¥çœŸå¯¦è³‡æ–™åº«ï¼š

- **`ProductGrid`** - å¾ API è¼‰å…¥å•†å“
  - ä½¿ç”¨ `useEffect` + `fetch`
  - Skeleton loading ç‹€æ…‹
  - éŒ¯èª¤è™•ç†
  - é€²åº¦æ¢è¨ˆç®—
  - é»æ“Šå°èˆªåˆ°è©³æƒ…é 

- **`FilterSection`** - å¾ API è¼‰å…¥å“ç‰Œ
  - å‹•æ…‹å“ç‰Œä¸‹æ‹‰é¸å–®
  - è¯å‹•ç³»åˆ—é¸æ“‡
  - é¡¯ç¤ºå•†å“æ•¸é‡

### 5. é¡å‹ç³»çµ±
å®šç¾©äº†ä»¥ä¸‹ TypeScript é¡å‹ï¼š

```typescript
// å®Œæ•´å•†å“é¡å‹
ProductWithDetails

// å¡ç‰‡é¡¯ç¤ºé¡å‹
ProductCard

// å“ç‰Œèˆ‡ç³»åˆ—
BrandWithSeries
SeriesWithProducts

// ç¯©é¸åƒæ•¸
FilterParams

// å·¥å…·å‡½æ•¸
calculateProgress()    // è¨ˆç®—é€²åº¦ç™¾åˆ†æ¯”
statusText            // ç‹€æ…‹æ–‡å­—æ˜ å°„
statusColor          // ç‹€æ…‹é¡è‰²æ˜ å°„
```

## ğŸ“ æ–°å¢çš„æ–‡ä»¶

```
src/
â”œâ”€â”€ lib/
â”‚   â””â”€â”€ db.ts                          # Prisma Client å¯¦ä¾‹
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts                       # TypeScript é¡å‹å®šç¾©
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”‚   â”œâ”€â”€ route.ts              # å•†å“åˆ—è¡¨ API
â”‚   â”‚   â”‚   â””â”€â”€ [slug]/route.ts       # å•†å“è©³æƒ… API
â”‚   â”‚   â””â”€â”€ brands/
â”‚   â”‚       â””â”€â”€ route.ts              # å“ç‰Œåˆ—è¡¨ API
â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â””â”€â”€ [slug]/page.tsx           # å•†å“è©³æƒ…é 
â”‚   â”œâ”€â”€ brands/
â”‚   â”‚   â””â”€â”€ [slug]/page.tsx           # å“ç‰Œé é¢
â”‚   â””â”€â”€ series/
â”‚       â””â”€â”€ [slug]/page.tsx           # ç³»åˆ—é é¢
.env.example                           # ç’°å¢ƒè®Šé‡ç¯„ä¾‹
```

## ğŸš€ å¦‚ä½•ä½¿ç”¨

### 1. è¨­å®šç’°å¢ƒè®Šé‡

è¤‡è£½ `.env.example` ç‚º `.env`ï¼š

```bash
cp .env.example .env
```

å¡«å…¥ä½ çš„ Supabase è³‡æ–™åº«é€£æ¥å­—ä¸²ï¼š

```env
DATABASE_URL="postgresql://..."
DIRECT_URL="postgresql://..."
```

### 2. ç”Ÿæˆ Prisma Client

```bash
npx prisma generate
```

### 3. æ¨é€ Schema åˆ°è³‡æ–™åº«

```bash
npx prisma db push
```

### 4. ï¼ˆå¯é¸ï¼‰ä½¿ç”¨ Prisma Studio ç®¡ç†è³‡æ–™

```bash
npx prisma studio
```

åœ¨ç€è¦½å™¨ä¸­æ‰“é–‹ http://localhost:5555 ä¾†ç®¡ç†è³‡æ–™åº«ã€‚

### 5. æ·»åŠ æ¸¬è©¦è³‡æ–™

ä½¿ç”¨ Prisma Studio æˆ–ç›´æ¥åœ¨è³‡æ–™åº«ä¸­æ·»åŠ ï¼š

1. å‰µå»ºå“ç‰Œï¼ˆBrandï¼‰
2. å‰µå»ºç³»åˆ—ï¼ˆSeriesï¼‰é—œè¯åˆ°å“ç‰Œ
3. å‰µå»ºå•†å“ï¼ˆProductï¼‰é—œè¯åˆ°ç³»åˆ—
4. ï¼ˆå¯é¸ï¼‰æ·»åŠ çé …ï¼ˆProductVariantï¼‰
5. ï¼ˆå¯é¸ï¼‰æ·»åŠ åœ–ç‰‡ï¼ˆImageï¼‰

### 6. å•Ÿå‹•é–‹ç™¼æœå‹™å™¨

```bash
npm run dev
```

è¨ªå• http://localhost:3000 æŸ¥çœ‹ç¶²ç«™ã€‚

## ğŸ¯ é é¢è·¯ç”±

- **é¦–é **: `/` - é¡¯ç¤ºæ‰€æœ‰å•†å“
- **å•†å“è©³æƒ…**: `/products/[slug]` - ä¾‹å¦‚ `/products/genshin-impact-vol-3`
- **å“ç‰Œé é¢**: `/brands/[slug]` - ä¾‹å¦‚ `/brands/genshin-impact`
- **ç³»åˆ—é é¢**: `/series/[slug]` - ä¾‹å¦‚ `/series/genshin-impact-vol-3`

## ğŸ”§ API ä½¿ç”¨ç¯„ä¾‹

### ç²å–å•†å“åˆ—è¡¨

```typescript
// ç²å–æ‰€æœ‰é€²è¡Œä¸­çš„å•†å“
const res = await fetch('/api/products?status=active&limit=12');
const data = await res.json();
console.log(data.products);

// æŒ‰å“ç‰Œç¯©é¸
const res = await fetch('/api/products?brand=genshin-impact');

// æ’åº
const res = await fetch('/api/products?sortBy=price_low');
```

### ç²å–å“ç‰Œåˆ—è¡¨

```typescript
const res = await fetch('/api/brands');
const data = await res.json();
console.log(data.brands);
```

## ğŸ“Š è³‡æ–™åº«é—œä¿‚

```
Brand (å“ç‰Œ)
  â””â”€â”€ Series (ç³»åˆ—)
        â””â”€â”€ Product (å•†å“)
              â”œâ”€â”€ ProductVariant (çé …)
              â””â”€â”€ Image (åœ–ç‰‡)
```

## ğŸ¨ UI ç‰¹æ€§

### å•†å“å¡ç‰‡
- å°é¢åœ–ç‰‡ï¼ˆå¤±æ•—æ™‚ä½¿ç”¨ä½”ä½åœ–ï¼‰
- å“ç‰Œæ¨™ç±¤
- ç‹€æ…‹æ¨™ç±¤ï¼ˆé€²è¡Œä¸­/å·²å®Œå”®/å·²çµæŸï¼‰
- é€²åº¦æ¢ï¼ˆå·²å”®/å‰©é¤˜ï¼‰
- åƒ¹æ ¼é¡¯ç¤º
- æ‡¸åœæ•ˆæœ

### å•†å“è©³æƒ…é 
- å¤§åœ–å±•ç¤º
- åœ–ç‰‡ç•«å»Š
- éºµåŒ…å±‘å°èˆª
- çé …åˆ—è¡¨ï¼ˆå«ç¨€æœ‰åº¦å’Œåº«å­˜ï¼‰
- è³¼è²·æŒ‰éˆ•ï¼ˆæ ¹æ“šç‹€æ…‹ç¦ç”¨ï¼‰
- é€²åº¦æ¢å’Œçµ±è¨ˆè³‡è¨Š

### ç¯©é¸åŠŸèƒ½
- å“ç‰Œé¸æ“‡
- ç³»åˆ—è¯å‹•é¸æ“‡
- åƒ¹æ ¼ç¯„åœ
- ç‹€æ…‹ç¯©é¸
- æ’åºé¸é …

## ğŸ” ä¸‹ä¸€æ­¥å»ºè­°

### åŠŸèƒ½æ“´å±•
1. **ç”¨æˆ¶ç³»çµ±**: ç™»å…¥ã€è¨»å†Šã€å€‹äººè³‡æ–™
2. **è³¼ç‰©åŠŸèƒ½**: åŠ å…¥è³¼ç‰©è»Šã€çµå¸³æµç¨‹
3. **æœç´¢åŠŸèƒ½**: å…¨æ–‡æœç´¢å•†å“
4. **æ”¶è—åŠŸèƒ½**: è¿½è¹¤å–œæ„›çš„å•†å“
5. **åˆ†é åŠŸèƒ½**: å•†å“åˆ—è¡¨åˆ†é è¼‰å…¥
6. **ç¯©é¸å™¨æ•´åˆ**: FilterSection èˆ‡ ProductGrid è¯å‹•

### æ€§èƒ½å„ªåŒ–
1. ä½¿ç”¨ React Query æˆ– SWR é€²è¡Œè³‡æ–™ç·©å­˜
2. åœ–ç‰‡æ‡¶åŠ è¼‰
3. ç„¡é™æ»¾å‹•åˆ†é 
4. ISRï¼ˆIncremental Static Regenerationï¼‰for éœæ…‹é é¢

### ç®¡ç†å¾Œå°
1. å•†å“ç®¡ç†ï¼ˆCRUDï¼‰
2. è¨‚å–®ç®¡ç†
3. ç”¨æˆ¶ç®¡ç†
4. çµ±è¨ˆå„€è¡¨æ¿

## ğŸ“ æ³¨æ„äº‹é …

1. **åœ–ç‰‡è·¯å¾‘**: ç›®å‰ä½¿ç”¨ `picsum.photos` ä½œç‚ºä½”ä½åœ–ï¼Œè«‹æ›¿æ›ç‚ºå¯¦éš›å•†å“åœ–ç‰‡
2. **ç’°å¢ƒè®Šé‡**: ç¢ºä¿ `.env` æ–‡ä»¶ä¸è¢«æäº¤åˆ° Gitï¼ˆå·²åœ¨ `.gitignore` ä¸­ï¼‰
3. **éŒ¯èª¤è™•ç†**: æ‰€æœ‰ API éƒ½æœ‰åŸºæœ¬éŒ¯èª¤è™•ç†ï¼Œå¯æ ¹æ“šéœ€æ±‚æ“´å±•
4. **é¡å‹å®‰å…¨**: ä½¿ç”¨ Prisma ç”Ÿæˆçš„é¡å‹ç¢ºä¿é¡å‹å®‰å…¨

## âœ¨ æŠ€è¡“äº®é»

- âœ… Next.js 15 App Router
- âœ… Server Components for SEO
- âœ… Client Components for äº’å‹•
- âœ… Prisma ORM
- âœ… TypeScript åš´æ ¼æ¨¡å¼
- âœ… Tailwind CSS v4
- âœ… éŸ¿æ‡‰å¼è¨­è¨ˆ
- âœ… éª¨æ¶å±è¼‰å…¥ç‹€æ…‹
- âœ… éŒ¯èª¤é‚Šç•Œè™•ç†

---

**å‰ç«¯æ•´åˆå®Œæˆï¼** ğŸ‰

ç¾åœ¨ä½ å¯ä»¥é–‹å§‹æ·»åŠ æ¸¬è©¦è³‡æ–™ä¸¦æŸ¥çœ‹ç¶²ç«™æ•ˆæœäº†ã€‚
